<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="layout/AdminPanelPattern.html"
      xmlns:sec="http//www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<div layout:fragment="contentAdminPanel">
    <div id="addItemPage">
    </div>
    <div class="container">
        <label for="namename" class="mt-3 mb-1">
            Название:
        </label>
        <div class="mb-3">
            <input type="text" class="form-control"
                   aria-describedby="inputGroup-sizing-default"
                   id="namename" required>
        </div>
    </div>
    <script type="text/javascript">
        function addCategory() {
            let json = {
                "name": namename.value,
            };
            let body = JSON.stringify(json);
            const xhr = new XMLHttpRequest();
            xhr.open("POST", "/category", true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onreadystatechange = () => {
                if (xhr.status === 200 && xhr.readyState === XMLHttpRequest.DONE) {
                    let itemObj = JSON.parse(xhr.responseText);
                    if (itemObj.id != null) {
                        alert("Категория добавлена успешно");
                    }
                }
            }
            xhr.send(body);
        }
    </script>
    <div>
        <button type="button" class="btn btn-primary" onclick="addCategory()">Добавить</button>
    </div>
</div>
</html>